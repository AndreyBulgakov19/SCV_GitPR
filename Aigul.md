![Logo](Logo.jpg)
# Работа с Git
## Описание
Git - Система контроля версий - это система, записывающая изменения в файл или набор файлов в течение времени и позволяющая вернуться позже к определённой версии. Эта  система может использовать контроль версий практически для любых типов файлов
## 1. Проверка наличия установленного Git
После запуска, открыть терминал и выполнить команду `git --version` или `git -v`. Если Git установлен, появится сообщение о версии программы, иначе будет сообщение об ошибке.
## 2. Установка Git
Загрузить последнюю версию Git с [сайта](https://git-scm.com/downloads). Устанавить или обновить старую версию с настройками по умолчанию. Дополнительно можно установить графический интерфейс.
## 3. Настройка Git
Первое, что нужно сделать после установки Git - указать имя и адрес электронной почты. Это необходимо потому, что каждый коммит в Git содержит эту информацию. Для этого нужно ввести в терминале две команды:
```
git config --global user.name «Ваше имя английскими буквами»
git config --global user.email ваша mail@example.com
```
Если указана опция `--global`, то эти настройки достаточно сделать только один раз, поскольку в этом случае Git будет использовать эти данные для всего, что вы делаете в этой системе. Если для каких-то отдельных проектов вы хотите указать другое имя или электронную почту, можно выполнить эту же команду без параметра `--global` в каталоге с нужным проектом.
## 4. Создание Git-репозитория
Для создания репозитория, необходимо создать пустую папку или открыть папку с проектом, который в настоящее время не находится под версионным контролем, и превратить его в репозиторий Git. Для этого в терминале выполнить команду `git init`. Эта команда выполняется один раз для нового проекта.
## 5. Запись изменений в репозитории
Чтобы посмотреть, какой статус работы на данный момент, нужно выполнить команду `git status`. В результате будет видно, какие файлы отслеживаются. Для того чтобы начать отслеживать (добавить под версионный контроль) новый файл,
используется команда `git add`.
+ **git add .** - добавить все файлы из этой папки.
+ **git add <имя файла>** - добавляет только конкретный файл.

Теперь необходимо закоммитить. Для этого используют команду:
+ **git commit -m "коментарий"**. Флажок `-m` задает `commit message` - комментарий разработчика. Он необходим для описания закоммиченных изменений.
+ **git commit -am "коментарий"**. Флажок `-am` позволяет использовать команду без предварительного использования команды `git add`

В любой момент вам может потребоваться что-либо отменить. Отмена может потребоваться, если вы сделали коммит слишком рано, например, забыв добавить какие-то файлы или комментарий к коммиту. Если вы хотите переделать
коммит - используйте команду `git commit --amend`.

Чтобы увидеть не проиндексированые изменения, необходимо набрать команду `git diff`. Если все изменения проиндексированы, то `git diff` ничего не покажет.
## 6. Просмотр истории коммитов
Для просмотра журнала изминений используют команду `git log`. Варианты команд:
+ **git log --oneline** - сокращенная версия вывода (без данных об авторе коммитов)
+ **git log --oneline -2** - сокращенная версия вывода двух последних коммитов.
+ **git log --oneline -2 -p** - сокращенная версия вывода двух последних коммитов с выводом разницы между этими коммитами.

По умолчанию (без аргументов) `git log` перечисляет коммиты, сделанные в репозитории в обратном к хронологическому порядке - последние коммиты находятся вверху.
## 7. Перемещение между коммитами
Для перемещения между коммитами вводится команда `git chekout <номер коммита>`. Номер можно указывать не полность, достаточно первые четыре символа. Для возврата в последнюю проиндексированную версию достаточно ввести `git chekout master` (если вы работали в ветке _**master**_). Начиная с Git версии 2.23, вы можете использовать  для перемещения между коммитами команду `git switch`, что более предпочтительнее.
## 8. Игнорирование файлов
Для того, чтобы исключить из отслеживания в репозитории определенные файлы или папки, необходимо создать там файл _**.gitignore**_ и записать в него их названия или шаблоны, соответствующие таким файлам или папкам. 
К шаблонам в файле .gitignore применяются следующие правила:
+ Пустые строки, а также строки, начинающиеся с #, игнорируются.
+ Стандартные шаблоны являются глобальными и применяются рекурсивно для всего дерева каталогов.
+ Чтобы избежать рекурсии используйте символ слеш (/) в начале шаблона.
+ Чтобы исключить каталог добавьте слеш (/) в конец шаблона.
+ Можно инвертировать шаблон, использовав восклицательный знак (!) в качестве первого символа.
## 9. Создание веток в Git
Используя ветвление, Вы отклоняетесь от основной линии разработки и продолжаете работу независимо от неё, не вмешиваясь в основную линию.
По умолчанию имя основной ветки в Git - _**master**_. Создать ветку можно командой `git branch <имя новой ветки>`.
Для перехода в новую ветку используют команду `git switch <имя ветки>`. Варианты команд создания и перехода в другие ветки:
+ **git checkout -b <название ветки>** - создать новую ветку и переключиться на неё.
+ **git switch -c <название ветки>** - создать новую ветку и переключиться на неё.

Для просмотра созданных веток используйте команду `git branch`.
## 10. Слияние веток и разрешение конфликтов
Для слияния выбранной ветки с текущей можно выполнить команду `git merge <название выбранной ветки>`. Для этого перейдите в ветку, в которую хотите влить, командой `git switch <имя ветки>` (обычно это _**master**_, как основная) и сделайте слияние.

Если в двух ветках, которые собираются слить, были внесены разные изменения в один и тот же файл, Git не сможет просто взять и объединить их и может возникнуть конфликт. Иногда конфликты исправляются автоматически, но обычно с этим приходится разбираться вручную или отменять слияние командой `git merge --abort`.
![Conflict](conflict.png)
Визуальное отображение в Visual Studio Code.

Предлагается выбрать один из вариантов для решения конфликта:
+ **Принять текущее изменение** - оставить изменения в ветке, в коротую происходит слияние.
+ **Принять входящее изменение** - оставить данные из входящей ветки.
+ **Принять оба изменения** - остаются оба варианта.
+ **Сравнить изменения** - открывается окно, в котором выделены несовпадающие данные обоих вариантов.

Когда все готово, нужно закоммитить изменения, чтобы закончить процесс.
## 11. Удаление веток
Для удаления ненужной ветки необходимо перейти на любую другую ветку с удаляемой ветки и применить команду `git branch -d <название ненужной ветки>`. Флажок `-d` означает `delete`. Для удаления ветки можно также использовать команду `git branch --delete <название ненужной ветки>`.  Если ненужная ветка не была слита, то при удалении командой `git branch -d <название ненужной ветки>` появится ошибка:
```bash
git branch -d branchError
error: The branch 'branchError' is not fully merged.
If you are sure you want to delete it, run 'git branch -D branchError'.
```
# Работа с удаленными репозиториями
_**Удаленный репозиторий**_ - это версии проекта, сохраненные на удаленном сервере. Доступ к репозиторию на таком сервере может осуществляться по интернету или по локальной сети.
Удаленный репозиторий - полноценный репозиторий, ничем не отличающийся от локального. Если подключить удаленный репозиторий к своему локальному, то появятся копии всех ссылочных объектов удаленного репозитория.

Для работы с удаленными репозиториями, можно воспользоваться сервисом `GitHub`.

_**GitHub**_ - это сервис компаний Microsoft, который позволяет интегрироваться с программой Git и настроить удаленную работу с репозиториями.
## 1. Настройка GitHub
Прежде чем начать работу с удаленными репозиториями, необходимо создать бесплатную учётную запись. Для этого нужно зайти на [сайт](https://github.com), выбрать имя которое ещё не занято, указать адрес электронной почты и
пароль, далее нажать на кнопку `Sign up for GitHub`.

GitHub использует ваш почтовый адрес для привязки ваших Git коммитов к вашей учётной записи. Если вы используете несколько почтовых адресов в своих коммитах и хотите,
чтобы GitHub работал с ними корректно, то необходимо добавить все используемые почтовые адреса в секцию под названием `Emails`.
## 2. Работа со своими репозиториями
Создать локальный репозиторий. На сайте GitHub, в своем аккаунте нажать на `+` далее на `New repository`. Это приведет к открытию формы для создания репозитория. Далее необходимо дать имя новому репозиторию и нажать кнопку `Create Repository`.

Git Hub предложит варианты дальнейших действий:
```
…or create a new repository on the command line (создать новый репозиторий в командной строке)
echo "# Instruction" >> README.md
git init
git add README.md
git commit -m "first commit"
git branch -M main
git remote add origin https://github.com/ZhivolunAigul/Instruction.git
git push -u origin main
```
```
…or push an existing repository from the command line (отправить существующий репозиторий из командной строки)
git remote add origin https://github.com/ZhivolunAigul/Instruction.git
git branch -M main
git push -u origin main
```
```
…or import code from another repository (импортировать код из другого репозитория)
You can initialize this repository with code from a Subversion, Mercurial, or TFS project.
```
Так как локально репозиторий уже создан, то необходимо использовать второй пункт и ввести команды по очереди:
+ `git remote add origin https://github.com/ZhivolunAigul/Instruction.git` - удаленно связывает локальный репозиторий с удаленным репозиторием.
+ `git branch -M main` - принудительное переименование основной ветки локального репозитория в `main` (если изначально основная ветка локального репозитория `main` то команду вводить не надо)
+ `git push -u origin main` - отправить локальный репозиторий в удаленный.

После внесения изменений в локальном репозитории, необходимо закоммитить все изменения, далее ввести команду `git push`, чтобы обновить наш удаленный репозиторий. Изменения в свой удаленный репозиторий так же можно вносить непосредственно в сервисе GitHub и так же их там закоммитить. Чтобы в этом случае синхронизировать варианты своего репозитория, используют команду `git pull`.

`git pull` - не только подгружает изменения, но и мержит возможные ветки удаленного репозитория, синхронизируя состояние локального и удаленного репозиторий. При использовании этой команды так же могут возникнуть конфликты.
## 3. Работа с чужими репозиториями
Вы можете скопировать чужой репозиторий и развивать проект в нем самостоятельно. Но в этом случае создается совершенно новый репозиторий и свои изменения вы уже не сможете залить в исходный репозиторий. Для этого необходимо сделать копию чужого репозитория, нажав кнопку `fork`. В результате появиться точная копия чужого репозитория, но уже на нашем аккаунте. Со своего аккаунта можно его клонировать в свои локальные папки. Для этого необходимо нажать на кнопку `Code` и скопировать url-адрес. Далее в консоли перрейти в папку, в которую необходимо склонировать удаленный репозиторий, и ввести команду `git clone <url-адрес репозитория>`. После клонирования, для перехода в папку репозитория, вводим команду `cd <название папки клонированного репозитория>`.

Если мы хотим предложить изменения в чужой проект, то это всегда делается в отдельной ветке.

После внесения изменений, мы можем предложить наш вариант тому, кто владеет основным репозиторием. Для этого нужно направить изменения в репозиторий на нашем аккаунте командой `git push --set-upstream origin <название новой ветки>` - эта команда используется из-за того, что мы вводим `git push` из соседней ветки, которой изначально не было в удаленном репозитории.

На GitHub после одновления страницы нажимаем на появившуюся кнопку `Compare & pull request` - сравни и отправь запрос на вливание в основной репозиторий. После проверки сервисом GitHub на возможность появления конфликтов, мы можем оставить комментарий и нажать на кнопку `Create pull request`. Далее в аккаунте, с которого делалась копия, появится ваш запрос на изменение. С ним будет работать уже хозяин этого аккаунта - влить предложенные нами изменения или нет.

Иногда кнопка `Compare & pull request` может не появится. В этом случае выполняем следующие шаги:
1. Переходим во вкладку `Pull requests` (по умолчанию на GitHub в своем репозитории мы находимся во вкладке `Code`)
2. Нажимаем зеленую кнопку `New pull request`
3. Открывается окно с надписью `There isn't anything to compare`. Над надписью указаны исходный репозиторий (слева) и наш репозиторий (справа), и указаны ветки этих репозиториев. Так как изменения делаются в новой ветке, то следует вправом репозитории указать ветку с изменениями. В результате, появится зеленая кнопка `Create pull request`.