# Инструкция по работе с git

## Что такое git

Git — это специальная программа, которая позволяет отслеживать любые изменения в файлах, хранить их версии и оперативно возвращаться в любое сохранённое состояние.

## Подготовка репозитория

Для подготовки *репозитория* необходимо перейти в терминале в папку, которая будет отслеживаться git и выполнить в команду 
```sh
git init
```
В созданном репозитории должна появиться скрытая папка **.git**

## Создание коммитов

* Чтобы добавить файл к отслеживанию git, необходимо выполнить команду ***git add***. Добавлять файл к индексированию нужно каждый раз при создании новой версии.

```sh
git add <file name>
```

* Чтобы добавить коммит (зафиксировать изменения), нужно выполнить команду ***git commit -m***. К каждому коммиту нужно обязательно добавлять комментарий, отражающий суть внесенных изменений.
```sh
git commit -m "<comment>"
```

* Чтобы проверить состояние репозитория, нужно выполнить команду ***git status***. После выполнения команды вы увидите были ли изменения в файлах.
```sh
git status
```
## Просмотр созданных коммитов

### Команда git log

Для того, чтобы вывести весь список созданных коммитов, необходимо воспользоваться комнадой
```sh
git log
```
Чтобы вывести список коммитов в укороченном виде, необходимо к команде ***git log*** добавить ***--oneline*** Получится следующее
```sh
git log --oneline
```
После выполнения команды, можно увидеть, что *HEAD указывает на master*. Это значит, что мы видим самую актуальную версию документа.

Если использовать ключ *--graph*, то можно посмотреть некое графическое отображение веток и их слияния:
```sh
git log --graph
```
```sh
git log --oneline --graph
```
![Пример работы git log --graph](exmp.png)

## Переход между коммитами и ветками

### Переход между коммитами

Чтобы переключиться между коммитами, нужно выполнить в терминале команду 
```sh
git checkout <commit id>
```
*commit id*  - это уникальный норме каждого коммита, который можно посмотреть, вызвав команду ***git log***.
Нет необходимости указывать полный id коммита, достаточно указать первые 4 символа.

Добавлять новые коммиты можно только ***из самой последней***, актуальной версии.

Для того чтобы вернуться к последней версии, нужно выполнить следюущую команду
```sh
git checkout <master>
```
master - это наименование текущей ветки.

### Переход между ветками

Чтобы переключиться между ветками, нужно выполнить в терминале команду 
```sh
git checkout <имя ветки>
```

## Другие команды

1. Команда, которая выводит **разницу** между последней сохраненной версией и текущим состоянием файла
```sh
git diff <master>
```
2. Команда, которая удаляет изменения, которые не добавлены в коммит
```sh
git restore <имя файла>
```
## Работа с ветками

Команда, которая показывает все созданные ветки
```sh
git branch
```
### Создание и удаление веток

* Чтобы создать новую ветку, нужно использовать команду **branch** и после добавить название новой ветки:
```sh
git branch <имя ветки>
```
* Чтобы удалить ветку, нужно использловать комнаду **branch** с ключом *-d*:
```sh
git branch -d <имя ветки>
```
### Слияние веток

Чтобы слить ветку, нужно перейти на главную ветку, затем выполнить команду **merge**:
```sh
git merge <имя ветки>
```
Если в одном и том же месте в двух разных ветках внесены разные изменения, то возникнет конфликт, которые git сам разрешить не сможет. Тогда его нужно разрешить вручную.

Для того, чтобы git игнорировал файлы, которые не нужно добавлять к индексированию, необходимо создать файл *.gitignore* (служебный файл), вписать в этот файла наименования файлов, которые нужно игнорировать и добавить сам файл *.gitignore* к индексированию, создать коммит.

## Работа с удаленными репозиториями

### Связывание удаленного репозитория с локальным

Чтобы связать удаленный репозиторий с локальным, требуется заранее создать на GitHub репозиторий, куда затем подтянуть локальный репозиторий с помощью следующих команд.
```sh
git remote add origin <ссылка на репозиторий GitHib>
```
Команда **remote** связывает локальный репозиторий с удаленным.

```sh
git remote show origin
```
Команда **remote show** показывает заданный репозиторий.

```sh
git remote show -v
```
Команда **remote** с ключом *-v* показывает показывает какие репозитории используются для чтения и записи.

```sh
git branch -M main
```
Команда **branch** с ключом *-M* переименовывает основную ветку (GitHub требует, чтобы основная ветка называлась **main**).

```sh
git push -u origin main
```
Команда **push** проталкивает все из локального репозитория в удаленный.

```sh
git pull 
```
Команда **pull** подтягивает изменения из удаленного репозитория в локальный. При этом, данная команда пытается сделать **merge** изменений.

```sh
git push origin --delete <имя ветки>
```
Команда **pish** с ключом *--delete* удаляет ветку с удаленном репозитории в терминале.

```sh
git pull -rebase
```
При попытке выталкивания (push) данных из локального репозитория в удаленный может произойти конфликт. Тогда сначала выполняется вытягивание изменений с сервера GitHub, затем разрешение конфликта и выталкивание новой версии в удаленный репозиторий.
Команда **pull** с ключом *-rebase* забирает изменения с сервера.

Далее выполняется команда **rebase** с ключом *-continue*, которая завершает выкачку изменений. После разрешения конфликта можно выполнять команду **push**.

### Копирования репозиториев

```sh
git clone <ссылка на репозиторий>
```
Команда **clone** копирует указанный репозиторий из GitHub в локальную папку. 

Чтобы предложить изменения в чужой проект на GitHub необходимо:
* скопировать репозиторий себе (выполнить **fork**);
* с помощью команды **git clone** склонировать удаленный репозиторий в локальную папку;
* создать новую ветку для предложения изменений (все изменения всегда делаются в отдельной ветке);
* внести изменения, выполнив команды **git add** и **git commit**;
* вытолкнуть изменения в свой удаленный репозиторий с помощью команды **push**;
* сделать *pull request* (предложение изменений) в исходный репозиторий.